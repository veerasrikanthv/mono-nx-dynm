"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateOptions = void 0;
const devkit_1 = require("@nx/devkit");
const validations_1 = require("../../utils/validations");
const version_utils_1 = require("../../utils/version-utils");
const semver_1 = require("semver");
function validateOptions(tree, options) {
    (0, validations_1.validateProject)(tree, options.project);
    (0, validations_1.validateStandaloneOption)(tree, options.standalone);
    validateHydrationOption(tree, options.hydration);
}
exports.validateOptions = validateOptions;
function validateHydrationOption(tree, hydration) {
    if (!hydration) {
        return;
    }
    const installedAngularVersion = (0, version_utils_1.getInstalledAngularVersionInfo)(tree).version;
    if ((0, semver_1.lt)(installedAngularVersion, '16.0.0')) {
        throw new Error((0, devkit_1.stripIndents) `The "hydration" option is only supported in Angular >= 16.0.0. You are currently using "${installedAngularVersion}".
    You can resolve this error by removing the "hydration" option or by migrating to Angular 16.0.0.`);
    }
}
