"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.updateFiles = void 0;
const devkit_1 = require("@nx/devkit");
function updateFiles(override, root) {
    if (override.files) {
        override.files = Array.isArray(override.files)
            ? override.files
            : [override.files];
        override.files = override.files.map((file) => mapFilePath(file, root));
    }
    return override;
}
exports.updateFiles = updateFiles;
function mapFilePath(filePath, root) {
    if (filePath.startsWith('!')) {
        const fileWithoutBang = filePath.slice(1);
        if (fileWithoutBang.startsWith('*.')) {
            return `!${(0, devkit_1.joinPathFragments)(root, '**', fileWithoutBang)}`;
        }
        else {
            return `!${(0, devkit_1.joinPathFragments)(root, fileWithoutBang)}`;
        }
    }
    if (filePath.startsWith('*.')) {
        return (0, devkit_1.joinPathFragments)(root, '**', filePath);
    }
    else {
        return (0, devkit_1.joinPathFragments)(root, filePath);
    }
}
