const a2_0x4c7e=['all','filter','startRun','cacheError','hashUrls','storage','Nx\x20Cloud:\x20Cache\x20miss\x20','storeInCurrentProcess','response','put','../../../utilities/environment','../../../utilities/nx-imports-light','then','indexOf','statuses','extractErrorMessage','__awaiter','remote-cache-hit','get','There\x20are\x20several\x20reasons\x20why\x20this\x20can\x20happen.','.\x20Status\x20404.','retrieve','requests','value','Nx\x20Cloud:\x20Skipping\x20storing\x20','hash','fileStorage','done','status','distributedExecutionId','push','reduce','resolve','messages','scheduledTasks','runContext','map','note','store','forEach','storeRequests','api','cache-miss','Maybe\x20you\x20are\x20using\x20a\x20read-only\x20token\x20or\x20the\x20artifact\x20has\x20already\x20being\x20uploaded.','CloudRemoteCache','Error\x20when\x20storing\x20artifacts','axiosException','delayedStoreRequests','next'];(function(_0x211d0f,_0x4c7ecd){const _0x24f956=function(_0x26fd1f){while(--_0x26fd1f){_0x211d0f['push'](_0x211d0f['shift']());}};_0x24f956(++_0x4c7ecd);}(a2_0x4c7e,0xef));const a2_0x24f9=function(_0x211d0f,_0x4c7ecd){_0x211d0f=_0x211d0f-0x0;let _0x24f956=a2_0x4c7e[_0x211d0f];return _0x24f956;};'use strict';var __awaiter=this&&this[a2_0x24f9('0x16')]||function(_0x353e5c,_0x2c286c,_0x33a7ca,_0x1008fb){function _0x5eb103(_0xf575c5){return _0xf575c5 instanceof _0x33a7ca?_0xf575c5:new _0x33a7ca(function(_0x1e8e4e){_0x1e8e4e(_0xf575c5);});}return new(_0x33a7ca||(_0x33a7ca=Promise))(function(_0x4a2aa5,_0x34010e){function _0xf215a2(_0x2b5815){try{_0x4b1756(_0x1008fb[a2_0x24f9('0x5')](_0x2b5815));}catch(_0x3c1446){_0x34010e(_0x3c1446);}}function _0x124f5a(_0x85c93a){try{_0x4b1756(_0x1008fb['throw'](_0x85c93a));}catch(_0x1dcb1e){_0x34010e(_0x1dcb1e);}}function _0x4b1756(_0x4760aa){_0x4760aa[a2_0x24f9('0x21')]?_0x4a2aa5(_0x4760aa[a2_0x24f9('0x1d')]):_0x5eb103(_0x4760aa['value'])['then'](_0xf215a2,_0x124f5a);}_0x4b1756((_0x1008fb=_0x1008fb['apply'](_0x353e5c,_0x2c286c||[]))[a2_0x24f9('0x5')]());});};Object['defineProperty'](exports,'__esModule',{'value':!![]});exports[a2_0x24f9('0x1')]=void 0x0;const environment_1=require(a2_0x24f9('0x10'));const {output}=require(a2_0x24f9('0x11'));class CloudRemoteCache{constructor(_0x34c5ca,_0x56dd37,_0x46e593,_0x161dbd,_0xcca186,_0x381d16){this[a2_0x24f9('0x27')]=_0x34c5ca;this[a2_0x24f9('0x2f')]=_0x56dd37;this[a2_0x24f9('0x29')]=_0x46e593;this[a2_0x24f9('0x20')]=_0x161dbd;this['distributedExecutionId']=_0xcca186;this[a2_0x24f9('0xd')]=_0x381d16;this['storeRequests']=[];this[a2_0x24f9('0x4')]=[];}[a2_0x24f9('0x1b')](_0x23a466,_0x44a33e){var _0x1e3a6d;return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages']['cacheError'])return![];const _0x531859=yield this[a2_0x24f9('0xa')](_0x23a466);if(!_0x531859||!_0x531859[a2_0x24f9('0x18')]){if(environment_1['VERBOSE_LOGGING']){output[a2_0x24f9('0x2b')]({'title':a2_0x24f9('0xc')+_0x23a466+'.'});}this['runContext'][a2_0x24f9('0x14')][_0x23a466]=a2_0x24f9('0x30');return![];}try{yield this[a2_0x24f9('0x20')][a2_0x24f9('0x1b')](_0x23a466,_0x531859[a2_0x24f9('0x18')],_0x44a33e);this[a2_0x24f9('0x29')][a2_0x24f9('0x14')][_0x23a466]=a2_0x24f9('0x17');return!![];}catch(_0x1e02ce){const _0x524ced=(_0x1e3a6d=_0x1e02ce[a2_0x24f9('0x3')])!==null&&_0x1e3a6d!==void 0x0?_0x1e3a6d:_0x1e02ce;if(_0x524ced[a2_0x24f9('0xe')]&&_0x524ced[a2_0x24f9('0xe')][a2_0x24f9('0x22')]===0x194){if(environment_1['VERBOSE_LOGGING']){output[a2_0x24f9('0x2b')]({'title':a2_0x24f9('0xc')+_0x23a466+a2_0x24f9('0x1a')});}}else{this['messages'][a2_0x24f9('0x9')]=this[a2_0x24f9('0x27')][a2_0x24f9('0x15')](_0x524ced,a2_0x24f9('0xb'));}this['runContext'][a2_0x24f9('0x14')][_0x23a466]=a2_0x24f9('0x30');return![];}});}[a2_0x24f9('0x2c')](_0x426f9b,_0x57b915){return __awaiter(this,void 0x0,void 0x0,function*(){if(this['messages'][a2_0x24f9('0x9')])return![];const _0xe26ed6=Promise[a2_0x24f9('0x26')]()[a2_0x24f9('0x12')](()=>__awaiter(this,void 0x0,void 0x0,function*(){var _0x476cbb;const _0x124212=yield this[a2_0x24f9('0xa')](_0x426f9b);if(!_0x124212)return![];if(!_0x124212[a2_0x24f9('0xf')]){if(environment_1['VERBOSE_LOGGING']){output[a2_0x24f9('0x2b')]({'title':a2_0x24f9('0x1e')+_0x426f9b+'.','bodyLines':[a2_0x24f9('0x19'),a2_0x24f9('0x0')]});}return!![];}if(!this[a2_0x24f9('0xd')]){this[a2_0x24f9('0x4')][a2_0x24f9('0x24')]({'hash':_0x426f9b,'url':_0x124212[a2_0x24f9('0xf')]});return!![];}try{yield this['fileStorage'][a2_0x24f9('0x2c')](_0x426f9b,_0x124212[a2_0x24f9('0xf')],_0x57b915);return!![];}catch(_0x41629a){const _0x4d59fe=(_0x476cbb=_0x41629a[a2_0x24f9('0x3')])!==null&&_0x476cbb!==void 0x0?_0x476cbb:_0x41629a;this[a2_0x24f9('0x27')]['cacheError']=this[a2_0x24f9('0x27')][a2_0x24f9('0x15')](_0x4d59fe,a2_0x24f9('0xb'));return![];}}));this['storeRequests'][a2_0x24f9('0x24')](_0xe26ed6);return _0xe26ed6;});}['hashUrls'](_0x4ee26b){return __awaiter(this,void 0x0,void 0x0,function*(){if(_0x4ee26b in this['runContext']['requests']){return(yield this['runContext'][a2_0x24f9('0x1c')][_0x4ee26b])[_0x4ee26b];}else{const _0x6fa9=this[a2_0x24f9('0x29')][a2_0x24f9('0x28')][a2_0x24f9('0x7')](_0x4d5ea5=>!this[a2_0x24f9('0x29')]['requests'][_0x4d5ea5[a2_0x24f9('0x1f')]])[a2_0x24f9('0x2a')](_0x129286=>_0x129286['hash']);if(_0x6fa9[a2_0x24f9('0x13')](_0x4ee26b)===-0x1){_0x6fa9[a2_0x24f9('0x24')](_0x4ee26b);}const _0x316395=this[a2_0x24f9('0x2f')][a2_0x24f9('0x8')](this[a2_0x24f9('0x23')],_0x6fa9);_0x6fa9[a2_0x24f9('0x2d')](_0x27b0ed=>{this[a2_0x24f9('0x29')][a2_0x24f9('0x1c')][_0x27b0ed]=_0x316395;});return(yield _0x316395)[_0x4ee26b];}});}['waitForStoreRequestsToComplete'](){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3c08f2=yield Promise[a2_0x24f9('0x6')](this[a2_0x24f9('0x2e')])[a2_0x24f9('0x12')](_0x40e92a=>_0x40e92a[a2_0x24f9('0x25')]((_0x780c36,_0x358d2e)=>_0x780c36&&_0x358d2e,!![]));if(!_0x3c08f2){throw new Error(a2_0x24f9('0x2'));}});}}exports[a2_0x24f9('0x1')]=CloudRemoteCache;