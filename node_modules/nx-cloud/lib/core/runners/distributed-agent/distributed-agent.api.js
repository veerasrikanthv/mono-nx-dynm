const a5_0x25d0=['mapRespToPerfEntry','data','value','ciExecutionEnv:\x20','apiAxiosInstance','__esModule','VERBOSE_LOGGING','next','ciExecutionId','recordMetric','done','RUNNER_FAILURE_PERF_ENTRY','/nx-cloud/executions/tasks','then','error','tasks','agentName','response','defineProperty','Completing\x20with\x20an\x20error','../../../utilities/axios','ciExecutionEnv','axiosException','completeRunGroup','runGroup','runGroup:\x20','axiosMultipleTries','error:\x20','__awaiter','post','ciExecutionId:\x20','Completed\x20run\x20group\x20with\x20an\x20error','createMetricRecorder','apply','DistributedAgentApi','note','throw','dtePollTasks','../../../utilities/nx-imports-light','../../../utilities/environment','branch'];(function(_0x5d03aa,_0x25d0db){const _0x57be59=function(_0x21319){while(--_0x21319){_0x5d03aa['push'](_0x5d03aa['shift']());}};_0x57be59(++_0x25d0db);}(a5_0x25d0,0x7c));const a5_0x57be=function(_0x5d03aa,_0x25d0db){_0x5d03aa=_0x5d03aa-0x0;let _0x57be59=a5_0x25d0[_0x5d03aa];return _0x57be59;};'use strict';var __awaiter=this&&this[a5_0x57be('0x1b')]||function(_0x586a2f,_0x532f19,_0xe09810,_0x1340b0){function _0x40ca91(_0x135be2){return _0x135be2 instanceof _0xe09810?_0x135be2:new _0xe09810(function(_0x3c3205){_0x3c3205(_0x135be2);});}return new(_0xe09810||(_0xe09810=Promise))(function(_0x2826a5,_0x562d17){function _0x10d0de(_0x342876){try{_0x58c3bc(_0x1340b0[a5_0x57be('0x6')](_0x342876));}catch(_0x4aba66){_0x562d17(_0x4aba66);}}function _0x71492d(_0x29d25f){try{_0x58c3bc(_0x1340b0[a5_0x57be('0x23')](_0x29d25f));}catch(_0xfaa526){_0x562d17(_0xfaa526);}}function _0x58c3bc(_0x58efa7){_0x58efa7[a5_0x57be('0x9')]?_0x2826a5(_0x58efa7['value']):_0x40ca91(_0x58efa7[a5_0x57be('0x1')])[a5_0x57be('0xc')](_0x10d0de,_0x71492d);}_0x58c3bc((_0x1340b0=_0x1340b0[a5_0x57be('0x20')](_0x586a2f,_0x532f19||[]))[a5_0x57be('0x6')]());});};Object[a5_0x57be('0x11')](exports,a5_0x57be('0x4'),{'value':!![]});exports[a5_0x57be('0x21')]=void 0x0;const axios_1=require(a5_0x57be('0x13'));const environment_1=require(a5_0x57be('0x26'));const metric_logger_1=require('../../../utilities/metric-logger');const {output}=require(a5_0x57be('0x25'));class DistributedAgentApi{constructor(_0x278dd1,_0x5d2dcd,_0x5f2cbd,_0x210498,_0x1e9fa5,_0x2b590e){this[a5_0x57be('0x27')]=_0x5d2dcd;this[a5_0x57be('0x17')]=_0x5f2cbd;this[a5_0x57be('0x7')]=_0x210498;this['ciExecutionEnv']=_0x1e9fa5;this['agentName']=_0x2b590e;this[a5_0x57be('0x3')]=(0x0,axios_1['createApiAxiosInstance'])(_0x278dd1);}[a5_0x57be('0xe')](_0x4a4d5a,_0x12bc32,_0x774fdb,_0x55c633){var _0x9d601a;return __awaiter(this,void 0x0,void 0x0,function*(){const _0x28ed71=(0x0,metric_logger_1['createMetricRecorder'])(a5_0x57be('0x24'));try{const _0x28ea47=yield(0x0,axios_1[a5_0x57be('0x19')])(()=>this[a5_0x57be('0x3')]['post'](a5_0x57be('0xb'),{'runGroup':this[a5_0x57be('0x17')],'ciExecutionId':this[a5_0x57be('0x7')],'ciExecutionEnv':this[a5_0x57be('0x14')],'agentName':this['agentName'],'executionId':_0x4a4d5a,'statusCode':_0x12bc32,'completedTasks':_0x774fdb,'targets':_0x55c633}));_0x28ed71['recordMetric']((0x0,metric_logger_1[a5_0x57be('0x28')])(_0x28ea47));return _0x28ea47[a5_0x57be('0x0')];}catch(_0x1bf1e2){_0x28ed71[a5_0x57be('0x8')](((_0x9d601a=_0x1bf1e2===null||_0x1bf1e2===void 0x0?void 0x0:_0x1bf1e2['axiosException'])===null||_0x9d601a===void 0x0?void 0x0:_0x9d601a[a5_0x57be('0x10')])?(0x0,metric_logger_1[a5_0x57be('0x28')])(_0x1bf1e2[a5_0x57be('0x15')]['response']):metric_logger_1['RUNNER_FAILURE_PERF_ENTRY']);throw _0x1bf1e2;}});}['completeRunGroupWithError'](_0x2f2895){var _0x1ed3c8;return __awaiter(this,void 0x0,void 0x0,function*(){if(environment_1[a5_0x57be('0x5')]){output['note']({'title':a5_0x57be('0x12'),'bodyLines':[a5_0x57be('0x1d')+this[a5_0x57be('0x7')],a5_0x57be('0x2')+this[a5_0x57be('0x14')],a5_0x57be('0x18')+this[a5_0x57be('0x17')],a5_0x57be('0x1a')+_0x2f2895]});}const _0x4b335c=(0x0,metric_logger_1[a5_0x57be('0x1f')])(a5_0x57be('0x16'));try{const _0x1098a2=yield(0x0,axios_1[a5_0x57be('0x19')])(()=>this[a5_0x57be('0x3')][a5_0x57be('0x1c')]('/nx-cloud/executions/complete-run-group',{'branch':this['branch'],'runGroup':this[a5_0x57be('0x17')],'ciExecutionId':this['ciExecutionId'],'ciExecutionEnv':this[a5_0x57be('0x14')],'agentName':this[a5_0x57be('0xf')],'criticalErrorMessage':_0x2f2895}));if(environment_1[a5_0x57be('0x5')]){output[a5_0x57be('0x22')]({'title':a5_0x57be('0x1e')});}_0x4b335c[a5_0x57be('0x8')]((0x0,metric_logger_1['mapRespToPerfEntry'])(_0x1098a2));}catch(_0x21fd7c){_0x4b335c[a5_0x57be('0x8')](((_0x1ed3c8=_0x21fd7c===null||_0x21fd7c===void 0x0?void 0x0:_0x21fd7c['axiosException'])===null||_0x1ed3c8===void 0x0?void 0x0:_0x1ed3c8[a5_0x57be('0x10')])?(0x0,metric_logger_1[a5_0x57be('0x28')])(_0x21fd7c['axiosException']['response']):metric_logger_1[a5_0x57be('0xa')]);console[a5_0x57be('0xd')](_0x21fd7c);}});}}exports[a5_0x57be('0x21')]=DistributedAgentApi;